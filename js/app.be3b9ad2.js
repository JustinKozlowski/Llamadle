(function(){"use strict";var e={9247:function(e,t,n){var s=n(5130),o=n(6768);function a(e,t,n,s,a,r){const i=(0,o.g2)("HelloWorld");return(0,o.uX)(),(0,o.Wv)(i)}var r=n(4232);const i={class:"chat-app"},l={class:"target-phrase-banner"},c={class:"chat-window"},u={class:"chat-messages"},d={class:"message-content"},h={key:0,class:"warning-banner"},p={key:1,class:"winner-banner"},f={key:2,class:"chat-input"},m=["disabled"],g=["disabled"],v={class:"footer-section"},y={class:"difficulty-dropdown"},k={class:"token-count"};function w(e,t,n,a,w,b){return(0,o.uX)(),(0,o.CE)("div",i,[t[7]||(t[7]=(0,o.Lk)("h1",{class:"chat-title"},"Llamadle",-1)),(0,o.Lk)("div",l,' Target Phrase: "'+(0,r.v_)(w.phrase.phrase)+'" ',1),(0,o.Lk)("div",c,[(0,o.Lk)("div",u,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(w.messages.slice(0),((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:(0,r.C4)(["chat-message",e.role])},[(0,o.Lk)("p",d,(0,r.v_)(e.content),1)],2)))),128))]),w.warningMessage?((0,o.uX)(),(0,o.CE)("div",h,(0,r.v_)(w.warningMessage),1)):(0,o.Q3)("",!0),w.winner?((0,o.uX)(),(0,o.CE)("div",p,[(0,o.eW)(' ðŸŽ‰ Congratulations! You found the phrase: "'+(0,r.v_)(w.phrase.phrase)+'" ðŸŽ‰ ',1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>b.loadNextPhrase&&b.loadNextPhrase(...e))},"Next")])):((0,o.uX)(),(0,o.CE)("div",f,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>w.prompt=e),placeholder:"Type your message...",rows:"2",disabled:w.loading,onKeydown:t[2]||(t[2]=(0,s.jR)((0,s.D$)(((...e)=>b.askPrompt&&b.askPrompt(...e)),["prevent"]),["enter"]))},null,40,m),[[s.Jo,w.prompt]]),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>b.askPrompt&&b.askPrompt(...e)),disabled:w.loading||!w.prompt.trim()},(0,r.v_)(w.loading?"Loading...":"Send"),9,g)])),(0,o.Lk)("div",v,[(0,o.Lk)("div",y,[(0,o.bo)((0,o.Lk)("select",{id:"difficulty","onUpdate:modelValue":t[4]||(t[4]=e=>w.selectedDifficulty=e),onChange:t[5]||(t[5]=(...e)=>b.updateDifficulty&&b.updateDifficulty(...e))},t[6]||(t[6]=[(0,o.Lk)("option",{value:"easy"},"Easy",-1),(0,o.Lk)("option",{value:"medium"},"Medium",-1),(0,o.Lk)("option",{value:"hard"},"Hard",-1)]),544),[[s.u1,w.selectedDifficulty]])]),(0,o.Lk)("div",k,[(0,o.Lk)("p",null,"Total Tokens: "+(0,r.v_)(w.tokenCount>0?w.tokenCount:0),1)])])])])}n(4114),n(8111),n(116);var b=n(6463);const L="Llama-3.1-8B-Instruct-q4f32_1-MLC";let C=null,x=!1;async function P(){const e=e=>{console.log(e)};C=await(0,b.L6)(L,{initProgressCallback:e}),x=!0}function W(){return C}function M(){return x}var T=n(144);const _=[{phrase:"An Apple a day",difficulty:{easy:["apple"],medium:["apple","day"],hard:["apple","day","doctor"]}},{phrase:"Early bird catches the worm",difficulty:{easy:["bird","worm"],medium:["bird","worm","catches","early"],hard:["bird","worm","catches","early"]}}];function D(){return _}var O={name:"WebLLMComponent",data(){return{prompt:"",messages:[],loading:!1,phrase:D()[0],bannedWords:D()[0].difficulty[this.selectedDifficulty],winner:!1,tokenCount:-10,preprocessed:!1,warningMessage:"",selectedDifficulty:"medium"}},methods:{checkForWinner(e,t){return console.log(t),console.log(e),e.toLowerCase().includes(t.toLowerCase())},makeWinner(){this.winner=!0},containsBannedWords(e){return console.log(this.bannedWords),console.log(this.phrase),console.log(this.selecteddifficulty),this.bannedWords.find((t=>e.toLowerCase().includes(t.toLowerCase())))},async askPrompt(){if(this.winner=!1,this.warningMessage="",!M())return void(this.warningMessage="Model is not loaded yet. Please wait.");if(!this.prompt.trim())return void(this.warningMessage="Please enter a prompt.");const e=this.containsBannedWords(this.prompt);if(e)this.warningMessage=`Your prompt contains a banned word: "${e}". Please revise it.`;else try{this.loading=!0;const e={role:"user",content:(0,T.ux)(this.prompt)};this.messages.push(e);const t=[{role:"system",content:"Respond in 10 words"},...(0,T.ux)(this.messages)],n=await W().chat.completions.create({messages:t});this.tokenCount+=n.usage.prompt_tokens-5;const s=n.choices[0].message.content,o={role:"assistant",content:s};this.messages.push(o),this.checkForWinner(s,this.phrase.phrase)&&this.makeWinner()}finally{this.loading=!1,this.prompt="",this.$nextTick((()=>{const e=this.$el.querySelector("textarea");e&&e.focus()}))}},updateDifficulty(){this.bannedWords=this.phrase.difficulty[this.selectedDifficulty],this.winner=!1,this.messages=[],this.tokenCount=-10},loadNextPhrase(){const e=D(),t=e.findIndex((e=>e.phrase===this.phrase.phrase)),n=(t+1)%e.length;this.phrase=e[n],this.updateDifficulty(),this.winner=!1,this.messages=[],this.tokenCount=-10},scrollToBottom(){this.$nextTick((()=>{const e=this.$el.querySelector(".chat-messages");e&&(e.scrollTop=e.scrollHeight)}))}},mounted(){this.updateDifficulty(),this.scrollToBottom()},updated(){this.scrollToBottom()}},E=n(1241);const j=(0,E.A)(O,[["render",w],["__scopeId","data-v-fc90bd0a"]]);var X=j,B={name:"App",components:{HelloWorld:X}};const $=(0,E.A)(B,[["render",a]]);var A=$;(0,s.Ef)(A).mount("#app"),(async()=>{await P()})()}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,s,o,a){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],o=e[u][1],a=e[u][2];for(var i=!0,l=0;l<s.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](s[l])}))?s.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[s,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,a,r=s[0],i=s[1],l=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(l)var u=l(n)}for(t&&t(s);c<r.length;c++)a=r[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},s=self["webpackChunkllamadle"]=self["webpackChunkllamadle"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],(function(){return n(9247)}));s=n.O(s)})();
//# sourceMappingURL=app.be3b9ad2.js.map