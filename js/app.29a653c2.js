(function(){"use strict";var e={6466:function(e,t,n){var o=n(5130),s=n(6768);function a(e,t,n,o,a,r){const i=(0,s.g2)("GameHelp"),l=(0,s.g2)("HelloWorld");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(i),(0,s.bF)(l)],64)}var r=n(4232);const i={class:"chat-app"},l={class:"target-phrase-banner"},c={class:"chat-window"},d={class:"chat-messages"},u={class:"message-content"},h={key:0,class:"warning-banner"},p={key:1,class:"winner-banner"},f={key:2,class:"chat-input"},m=["disabled"],g=["disabled"],v={class:"footer-section"},k={class:"difficulty-dropdown"},y={class:"token-count"};function w(e,t,n,a,w,b){return(0,s.uX)(),(0,s.CE)("div",i,[t[7]||(t[7]=(0,s.Lk)("h1",{class:"chat-title"},"Llamadle",-1)),(0,s.Lk)("div",l,' Target Phrase: "'+(0,r.v_)(w.phrase.phrase)+'" ',1),(0,s.Lk)("div",c,[(0,s.Lk)("div",d,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(w.messages.slice(0),((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,r.C4)(["chat-message",e.role])},[(0,s.Lk)("p",u,(0,r.v_)(e.content),1)],2)))),128))]),w.warningMessage?((0,s.uX)(),(0,s.CE)("div",h,(0,r.v_)(w.warningMessage),1)):(0,s.Q3)("",!0),w.winner?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.eW)(' ðŸŽ‰ Congratulations! You found the phrase: "'+(0,r.v_)(w.phrase.phrase)+'" ðŸŽ‰ ',1),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>b.loadNextPhrase&&b.loadNextPhrase(...e))},"Next")])):((0,s.uX)(),(0,s.CE)("div",f,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>w.prompt=e),placeholder:"Type your message...",rows:"2",disabled:w.loading,onKeydown:t[2]||(t[2]=(0,o.jR)((0,o.D$)(((...e)=>b.askPrompt&&b.askPrompt(...e)),["prevent"]),["enter"]))},null,40,m),[[o.Jo,w.prompt]]),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>b.askPrompt&&b.askPrompt(...e)),disabled:w.loading||!w.prompt.trim()},(0,r.v_)(w.loading?"Loading...":"Send"),9,g)])),(0,s.Lk)("div",v,[(0,s.Lk)("div",k,[(0,s.bo)((0,s.Lk)("select",{id:"difficulty","onUpdate:modelValue":t[4]||(t[4]=e=>w.selectedDifficulty=e),onChange:t[5]||(t[5]=(...e)=>b.updateDifficulty&&b.updateDifficulty(...e))},t[6]||(t[6]=[(0,s.Lk)("option",{value:"easy"},"Easy",-1),(0,s.Lk)("option",{value:"medium"},"Medium",-1),(0,s.Lk)("option",{value:"hard"},"Hard",-1)]),544),[[o.u1,w.selectedDifficulty]])]),(0,s.Lk)("div",y,[(0,s.Lk)("p",null,"Total Tokens: "+(0,r.v_)(w.tokenCount>0?w.tokenCount:0),1)])])])])}n(4114),n(8111),n(116);var b=n(6463);const L="Llama-3.2-1B-Instruct-q4f32_1-MLC";let C=null,M=!1,P=0;async function x(){const e=e=>{console.log(e);const t=e.text.match(/(\d+)%/);t&&(P=parseInt(t[1],10))};C=await(0,b.L6)(L,{initProgressCallback:e}),P=100,M=!0}function W(){return P}function T(){return C}function _(){return M}var E=n(144);const D=[{phrase:"An Apple a day",difficulty:{easy:["apple"],medium:["apple","day"],hard:["apple","day","doctor"]}},{phrase:"Early bird catches the worm",difficulty:{easy:["bird","worm"],medium:["bird","worm","catches","early"],hard:["bird","worm","catches","early"]}}];function O(){return D}var X={name:"WebLLMComponent",data(){return{prompt:"",messages:[],loading:!1,phrase:O()[0],bannedWords:O()[0].difficulty[this.selectedDifficulty],winner:!1,tokenCount:-10,preprocessed:!1,warningMessage:"",selectedDifficulty:"medium"}},methods:{checkForWinner(e,t){return console.log(t),console.log(e),e.toLowerCase().includes(t.toLowerCase())},makeWinner(){this.winner=!0},containsBannedWords(e){return console.log(this.bannedWords),console.log(this.phrase),console.log(this.selecteddifficulty),this.bannedWords.find((t=>e.toLowerCase().includes(t.toLowerCase())))},async askPrompt(){if(this.winner=!1,this.warningMessage="",!_())return void(this.warningMessage="Model is not loaded yet. Please wait.");if(!this.prompt.trim())return void(this.warningMessage="Please enter a prompt.");const e=this.containsBannedWords(this.prompt);if(e)this.warningMessage=`Your prompt contains a banned word: "${e}". Please revise it.`;else try{this.loading=!0;const e={role:"user",content:(0,E.ux)(this.prompt)};this.messages.push(e);const t=[{role:"system",content:"Respond in 1 sentence"},...(0,E.ux)(this.messages)],n=await T().chat.completions.create({messages:t});this.tokenCount+=n.usage.prompt_tokens-5;const o=n.choices[0].message.content,s={role:"assistant",content:o};this.messages.push(s),this.checkForWinner(o,this.phrase.phrase)&&this.makeWinner()}finally{this.loading=!1,this.prompt="",this.$nextTick((()=>{const e=this.$el.querySelector("textarea");e&&e.focus()}))}},updateDifficulty(){this.bannedWords=this.phrase.difficulty[this.selectedDifficulty],this.winner=!1,this.messages=[],this.tokenCount=-10},loadNextPhrase(){const e=O(),t=e.findIndex((e=>e.phrase===this.phrase.phrase)),n=(t+1)%e.length;this.phrase=e[n],this.updateDifficulty(),this.winner=!1,this.messages=[],this.tokenCount=-10},scrollToBottom(){this.$nextTick((()=>{const e=this.$el.querySelector(".chat-messages");e&&(e.scrollTop=e.scrollHeight)}))}},mounted(){this.updateDifficulty(),this.scrollToBottom()},updated(){this.scrollToBottom()}},H=n(1241);const I=(0,H.A)(X,[["render",w],["__scopeId","data-v-a258cc1e"]]);var j=I;const F={key:0},$=["disabled"];function A(e,t,n,a,i,l){return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showModal=!0)},"How to Play"),i.showModal?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:t[3]||(t[3]=(...e)=>l.closeModal&&l.closeModal(...e))},[(0,s.Lk)("div",{class:"modal-content",onClick:t[2]||(t[2]=(0,o.D$)((()=>{}),["stop"]))},[t[5]||(t[5]=(0,s.Lk)("h2",null,"How to Play",-1)),t[6]||(t[6]=(0,s.Lk)("p",null," Welcome to Llamadle! The goal of the game is to prompt the LLM to guess the secret phrase. Try to reach the phrase in the fewest tokens possible! ",-1)),i.engineLoaded?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",F,[t[4]||(t[4]=(0,s.Lk)("p",null," LLM is downloading. This will be faster on subsequent visits. ",-1)),(0,s.eW)(" Download Progress: "+(0,r.v_)(i.downloadProgress)+"% ",1)])),(0,s.Lk)("button",{disabled:!i.engineLoaded,onClick:t[1]||(t[1]=(...e)=>l.closeModal&&l.closeModal(...e))},"Close",8,$)])])):(0,s.Q3)("",!0)])}var B={name:"HelpModal",data(){return{showModal:!0,downloadProgress:0,engineLoaded:!1}},mounted(){this.updateProgress()},methods:{closeModal(){this.engineLoaded&&(this.showModal=!1)},updateProgress(){const e=setInterval((()=>{this.downloadProgress=W(),this.engineLoaded=_(),this.engineLoaded&&clearInterval(e)}),500)}}};const q=(0,H.A)(B,[["render",A],["__scopeId","data-v-e81bb19c"]]);var N=q,K={name:"App",components:{HelloWorld:j,GameHelp:N}};const Q=(0,H.A)(K,[["render",a]]);var S=Q;(0,o.Ef)(S).mount("#app"),(async()=>{await x()})()}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,a){if(!o){var r=1/0;for(d=0;d<e.length;d++){o=e[d][0],s=e[d][1],a=e[d][2];for(var i=!0,l=0;l<o.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,r=o[0],i=o[1],l=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(l)var d=l(n)}for(t&&t(o);c<r.length;c++)a=r[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},o=self["webpackChunkllamadle"]=self["webpackChunkllamadle"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(6466)}));o=n.O(o)})();
//# sourceMappingURL=app.29a653c2.js.map