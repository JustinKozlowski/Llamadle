(function(){"use strict";var e={2916:function(e,t,n){var o=n(5130),s=n(6768),a=n(4232);const r={key:0};function i(e,t,n,o,i,l){const c=(0,s.g2)("GameHelp"),d=(0,s.g2)("HelloWorld");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(c),(0,s.bF)(d),i.engineLoaded?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",r,"Download Progress: "+(0,a.v_)(i.downloadProgress)+"%",1))],64)}const l={class:"chat-app"},c={class:"target-phrase-banner"},d={class:"chat-window"},u={class:"chat-messages"},h={class:"message-content"},p={key:0,class:"warning-banner"},f={key:1,class:"winner-banner"},m={key:2,class:"chat-input"},g=["disabled"],v=["disabled"],k={class:"footer-section"},y={class:"difficulty-dropdown"},w={class:"token-count"};function b(e,t,n,r,i,b){return(0,s.uX)(),(0,s.CE)("div",l,[t[7]||(t[7]=(0,s.Lk)("h1",{class:"chat-title"},"Llamadle",-1)),(0,s.Lk)("div",c,' Target Phrase: "'+(0,a.v_)(i.phrase.phrase)+'" ',1),(0,s.Lk)("div",d,[(0,s.Lk)("div",u,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.messages.slice(0),((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,a.C4)(["chat-message",e.role])},[(0,s.Lk)("p",h,(0,a.v_)(e.content),1)],2)))),128))]),i.warningMessage?((0,s.uX)(),(0,s.CE)("div",p,(0,a.v_)(i.warningMessage),1)):(0,s.Q3)("",!0),i.winner?((0,s.uX)(),(0,s.CE)("div",f,[(0,s.eW)(' ðŸŽ‰ Congratulations! You found the phrase: "'+(0,a.v_)(i.phrase.phrase)+'" ðŸŽ‰ ',1),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>b.loadNextPhrase&&b.loadNextPhrase(...e))},"Next")])):((0,s.uX)(),(0,s.CE)("div",m,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.prompt=e),placeholder:"Type your message...",rows:"2",disabled:i.loading,onKeydown:t[2]||(t[2]=(0,o.jR)((0,o.D$)(((...e)=>b.askPrompt&&b.askPrompt(...e)),["prevent"]),["enter"]))},null,40,g),[[o.Jo,i.prompt]]),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>b.askPrompt&&b.askPrompt(...e)),disabled:i.loading||!i.prompt.trim()},(0,a.v_)(i.loading?"Loading...":"Send"),9,v)])),(0,s.Lk)("div",k,[(0,s.Lk)("div",y,[(0,s.bo)((0,s.Lk)("select",{id:"difficulty","onUpdate:modelValue":t[4]||(t[4]=e=>i.selectedDifficulty=e),onChange:t[5]||(t[5]=(...e)=>b.updateDifficulty&&b.updateDifficulty(...e))},t[6]||(t[6]=[(0,s.Lk)("option",{value:"easy"},"Easy",-1),(0,s.Lk)("option",{value:"medium"},"Medium",-1),(0,s.Lk)("option",{value:"hard"},"Hard",-1)]),544),[[o.u1,i.selectedDifficulty]])]),(0,s.Lk)("div",w,[(0,s.Lk)("p",null,"Total Tokens: "+(0,a.v_)(i.tokenCount>0?i.tokenCount:0),1)])])])])}n(4114),n(8111),n(116);var L=n(6463);const C="Llama-3.2-1B-Instruct-q4f32_1-MLC";let P=null,M=!1,x=0;async function W(){const e=e=>{console.log(e);const t=e.text.match(/(\d+)%/);t&&(x=parseInt(t[1],10))};P=await(0,L.L6)(C,{initProgressCallback:e}),x=100,M=!0}function _(){return x}function E(){return P}function D(){return M}var T=n(144);const O=[{phrase:"An Apple a day",difficulty:{easy:["apple"],medium:["apple","day"],hard:["apple","day","doctor"]}},{phrase:"Early bird catches the worm",difficulty:{easy:["bird","worm"],medium:["bird","worm","catches","early"],hard:["bird","worm","catches","early"]}}];function X(){return O}var H={name:"WebLLMComponent",data(){return{prompt:"",messages:[],loading:!1,phrase:X()[0],bannedWords:X()[0].difficulty[this.selectedDifficulty],winner:!1,tokenCount:-10,preprocessed:!1,warningMessage:"",selectedDifficulty:"medium"}},methods:{checkForWinner(e,t){return console.log(t),console.log(e),e.toLowerCase().includes(t.toLowerCase())},makeWinner(){this.winner=!0},containsBannedWords(e){return console.log(this.bannedWords),console.log(this.phrase),console.log(this.selecteddifficulty),this.bannedWords.find((t=>e.toLowerCase().includes(t.toLowerCase())))},async askPrompt(){if(this.winner=!1,this.warningMessage="",!D())return void(this.warningMessage="Model is not loaded yet. Please wait.");if(!this.prompt.trim())return void(this.warningMessage="Please enter a prompt.");const e=this.containsBannedWords(this.prompt);if(e)this.warningMessage=`Your prompt contains a banned word: "${e}". Please revise it.`;else try{this.loading=!0;const e={role:"user",content:(0,T.ux)(this.prompt)};this.messages.push(e);const t=[{role:"system",content:"Respond in 1 sentence"},...(0,T.ux)(this.messages)],n=await E().chat.completions.create({messages:t});this.tokenCount+=n.usage.prompt_tokens-5;const o=n.choices[0].message.content,s={role:"assistant",content:o};this.messages.push(s),this.checkForWinner(o,this.phrase.phrase)&&this.makeWinner()}finally{this.loading=!1,this.prompt="",this.$nextTick((()=>{const e=this.$el.querySelector("textarea");e&&e.focus()}))}},updateDifficulty(){this.bannedWords=this.phrase.difficulty[this.selectedDifficulty],this.winner=!1,this.messages=[],this.tokenCount=-10},loadNextPhrase(){const e=X(),t=e.findIndex((e=>e.phrase===this.phrase.phrase)),n=(t+1)%e.length;this.phrase=e[n],this.updateDifficulty(),this.winner=!1,this.messages=[],this.tokenCount=-10},scrollToBottom(){this.$nextTick((()=>{const e=this.$el.querySelector(".chat-messages");e&&(e.scrollTop=e.scrollHeight)}))}},mounted(){this.updateDifficulty(),this.scrollToBottom()},updated(){this.scrollToBottom()}},I=n(1241);const j=(0,I.A)(H,[["render",b],["__scopeId","data-v-a258cc1e"]]);var F=j;function $(e,t,n,a,r,i){return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>r.showModal=!0)},"How to Play"),r.showModal?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:t[3]||(t[3]=(...e)=>i.closeModal&&i.closeModal(...e))},[(0,s.Lk)("div",{class:"modal-content",onClick:t[2]||(t[2]=(0,o.D$)((()=>{}),["stop"]))},[t[4]||(t[4]=(0,s.Lk)("h2",null,"How to Play",-1)),t[5]||(t[5]=(0,s.Lk)("p",null," Welcome to Llamadle! The goal of the game is to guess the secret phrase. You have a limited number of attempts, and after each guess, you'll receive feedback to help you get closer to the correct answer. ",-1)),(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.closeModal&&i.closeModal(...e))},"Close")])])):(0,s.Q3)("",!0)])}var A={name:"HelpModal",data(){return{showModal:!1}},methods:{closeModal(){this.showModal=!1}}};const B=(0,I.A)(A,[["render",$],["__scopeId","data-v-846ed362"]]);var N=B,q={name:"App",components:{HelloWorld:F,GameHelp:N},data(){return{downloadProgress:0,engineLoaded:!1}},mounted(){this.updateProgress()},methods:{updateProgress(){const e=setInterval((()=>{this.downloadProgress=_(),this.engineLoaded=D(),this.engineLoaded&&clearInterval(e)}),500)}}};const K=(0,I.A)(q,[["render",i]]);var Q=K;(0,o.Ef)(Q).mount("#app"),(async()=>{await W()})()}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,a){if(!o){var r=1/0;for(d=0;d<e.length;d++){o=e[d][0],s=e[d][1],a=e[d][2];for(var i=!0,l=0;l<o.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,r=o[0],i=o[1],l=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(l)var d=l(n)}for(t&&t(o);c<r.length;c++)a=r[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},o=self["webpackChunkllamadle"]=self["webpackChunkllamadle"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(2916)}));o=n.O(o)})();
//# sourceMappingURL=app.0c709fa1.js.map